# ===== MyWeb 环境变量示例（合并了 Docker 与开发示例，供复制为 .env 使用） =====
# 说明：请复制本文件为 `.env`（不应提交包含敏感信息的 .env 到仓库），
#       并根据运行环境（开发/测试/生产）修改变量值。

######################### 基本运行 / 端口 #########################
# 前端开发服务器端口（仅在本地使用 Vite dev 时生效）
FRONTEND_PORT=3000

# 后端对外暴露的宿主机端口（docker-compose 会将宿主机端口映射到容器内的 3000）
# 使用场景：如果您希望宿主机的 3001 映射到容器内的 3000，请设置 BACKEND_PORT=3001
BACKEND_PORT=3000

# 为兼容旧配置，优先使用 PORT（许多工具默认读取 PORT），若未设置则使用 BACKEND_PORT
PORT=3000

# 宿主机端口映射的可选变量（部署脚本健康检查使用）
FRONTEND_HOST_PORT=3000

######################### 容器名与项目名 #########################
BACKEND_CONTAINER_NAME=myweb-backend

########## 前端相关（Vite / 运行时注入变量） ##########
# Vite 前端构建/运行时使用的 API 前缀（如果前端与后端同域，保留 '/api' 即可）
# 部署脚本 deploy.sh 会优先读取 DEPLOY_VITE_API_BASE，其次是此变量，写入 client/.env.production
# 当生产环境的前后端不在同一域或端口时，请设置为完整 URL（例如 https://example.com/api）
VITE_API_BASE=/api

# 可选：仅用于部署时覆盖前端 API 基础路径；若设置，将覆盖上面的 VITE_API_BASE
# DEPLOY_VITE_API_BASE=https://example.com/api

# 如果需要前端 dev server 代理到后端，您可以设置 VITE_BACKEND_PORT（会被 vite.config 使用）
VITE_BACKEND_PORT=3000

# 可选：前端 dev server 代理目标（形如 host:port）。不设置时按 BACKEND_PORT 推断为 localhost:${BACKEND_PORT}
# 仅开发环境有用（vite.config.js 中使用）。
# BACKEND_HOST=

# 前端访问密码（不设置时使用默认值，见 client/src/constants/auth.js）
VITE_APP_PASSWORD=asd123123123

######################### 部署 / Docker 相关 #########################
# 构建时控制项
# SKIP_SERVER_NPM_INSTALL=1 可跳过容器内的 server npm install（用于本地提前安装依赖以加速构建）
SKIP_SERVER_NPM_INSTALL=0
USE_LOCAL_CLIENT=0
LOCAL_CLIENT_BUILD_PATH=

# Docker / Compose 项目名与 BuildKit，当DOCKER_BUILDKIT=1时启用BuildKit
COMPOSE_PROJECT_NAME=myweb
DOCKER_BUILDKIT=1

# 部署域名（用于 Traefik 或其他反代规则）
DOMAIN=localhost

######################### 数据库 / 持久化 #########################
# SQLite 数据文件路径（容器内路径，通常由 volume 挂载覆盖）
DB_PATH=/app/server/data/myweb.db

######################### 安全（生产请替换） #########################
# 当前版本后端未使用会话/JWT 密钥，这里移除以避免误导。

######################### 日志 / 性能 #########################
# CORS 允许来源（后端 CORS 配置使用）。
# 例如开发可设为 * 或 http://localhost:3000。
CORS_ORIGIN=*

# 接口速率限制（每 15 分钟内允许的最大请求数），后端读取 RATE_LIMIT。
RATE_LIMIT=5000

# Express 请求体大小限制（支持例如 50mb、100mb，默认 100mb）。
BODY_LIMIT=2000mb

# ---------- 上传相关限制（multer / 各业务模块） ----------
# 通用文件上传（/api/files/upload）最大文件大小与单次最大数量
FILE_MAX_UPLOAD_SIZE=1gb
FILE_MAX_UPLOAD_FILES=100

# 小说上传默认复用上述 FILE_MAX_UPLOAD_SIZE 与数量限制

# 音乐上传接口（/api/music/upload）文件大小与批量上传数量
MUSIC_MAX_UPLOAD_SIZE=1gb
MUSIC_MAX_UPLOAD_FILES=300

# 壁纸上传默认最大文件大小
WALLPAPER_MAX_UPLOAD_SIZE=300mb

# 桌面应用图标上传最大文件大小
APP_ICON_MAX_UPLOAD_SIZE=100mb

# 留言板图片上传限制：单图大小与一次上传的最大图片数量
MESSAGE_IMAGE_MAX_SIZE=8mb
MESSAGE_IMAGE_MAX_FILES=5

# 说明结束：
# - 将本文件复制为 .env 并根据需要修改。
# - 对于生产环境，建议在部署主机上使用环境变量注入敏感信息（例如 SESSION_SECRET / JWT_SECRET），
#   或使用安全的 secrets 管理服务（Kubernetes Secrets / HashiCorp Vault 等）。
